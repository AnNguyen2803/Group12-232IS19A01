<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang chủ</title>
    
    <!-- Option 1: Include in HTML -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/response.css">
    <link rel="stylesheet" href="/css/product.css">
</head>
<body>
    <div id="alert-message"></div>
    <header id="header">
        <div class="container header-container" style="width: 87%">
            <nav class="main-menu">
                <div class="mobile-menu">
                    <i class="fa-solid fa-bars"></i>
                </div>
                <ul class="menu">
                    <div class="close-menu">
                        <i class="fa-solid fa-x"></i>
                    </div>
                    <li>
                        <a href="">Nữ</a>
                        <ul class="sub-menu">
                            <div class="cat-sub-menu">
                                <div><a href="">NEW ARRIVAL</a></div>
                                <div><a href="" style="color: #FF0000">MUA 2 GIẢM THÊM 10%</a></div>
                                <div><a href="" style="color: #FF0000">Online Exclusive</a></div>
                                <div><a href="">URBAN CHIC</a></div>
                                <div><a href="">MOMENT OF BLISS</a></div>
                                <div><a href="">Diễm THƯ</a></div>
                                <div><a href="">ARTISANAL DELICATE</a></div>
                            </div>
                            <div class="list-submenu">
                                <div class="item-list-submenu">
                                    <h3>Áo</h3>
                                    <ul>
                                        <li>Áo sơ mi</li>
                                        <li>Áo dáng peplum</li>
                                        <li>Áo thun/len</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Áo Khoác</h3>
                                    <ul>
                                        <li>Áo vest/blazer</li>
                                        <li>Áo dạ/măng tô</li>
                                        <li>Áo phao</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Set bộ</h3>
                                    <ul>
                                        <li>Set bộ công sở</li>
                                        <li>Set bộ co-ords</li>
                                        <li>Set bộ thun/len</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Quẩn & Jumpsuit</h3>
                                    <ul>
                                        <li>Quần dài</li>
                                        <li>Quần jeans</li>
                                        <li>Quẩn lừng/short</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Chân váy</h3>
                                    <ul>
                                        <li>Chân váy bút chì</li>
                                        <li>Chân váy chữ A</li>
                                        <li>Chân váy jeans</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Đầm/Áo Dài</h3>
                                    <ul>
                                        <li>Đầm công sở</li>
                                        <li>Đầm voan/maxi</li>
                                        <li>Đầm thun</li>
                                        <li>Áo dài</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Senora</h3>
                                    <ul>
                                        <li>Senora-Đầm dạ hội</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Phụ kiện</h3>
                                    <ul>
                                        <li>Đồ lót</li>
                                        <li>Phụ kiện</li>
                                        <li>Giày/dép & Sandals</li>
                                        <li>Túi/Ví</li>
                                    </ul>
                                </div>
                            </div>
                        </ul>
                    </li>
                    <li>
                        <a href="">Nam</a>
                        <ul class="sub-menu">
                            <div class="cat-sub-menu">
                                <div><a href="">NEW ARRIVAL</a></div>
                            </div>
                            <div class="list-submenu">
                                <div class="item-list-submenu">
                                    <h3>Áo</h3>
                                    <ul>
                                        <li>Áo thun</li>
                                        <li>Áo khoác</li>
                                        <li>Áo sơ mi</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Quần nam</h3>
                                    <ul>
                                        <li>Quần jeans</li>
                                        <li>Quần lửng/short</li>
                                        <li>Quần dài</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Phụ kiện</h3>
                                    <ul>
                                        <li>Phụ kiện</li>
                                    </ul>
                                </div>                               
                           </div>
                        </ul>
                    </li>
                    <li>
                        <a href="">Trẻ em</a>
                        <ul class="sub-menu">
                            <div class="cat-sub-menu">
                                <div><a href="">NEW ARRIVAL</a></div>
                                <div><a href="">Áo khoác</a></div>
                            </div>
                            <div class="list-submenu">
                                <div class="item-list-submenu">
                                    <h3>Bé gái</h3>
                                    <ul>
                                        <li>Áo bé gái</li>
                                        <li>Quần bé gái</li>
                                        <li>Váy bé gái</li>
                                        <li>Chân váy bé gái</li>
                                        <li>Phụ kiện bé gái</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu">
                                    <h3>Bé trai</h3>
                                    <ul>
                                        <li>Áo bé trai</li>
                                        <li>Quần bé trai</li>
                                        <li>Phụ kiện bé trai</li>
                                    </ul>
                                </div>                               
                           </div>
                        </ul>
                    </li>
                    <li>
                        <a href="" class="sale">Big sale tháng 3</a>
                        <ul class="sub-menu" style ="width: 78vw">
                            <div class="list-submenu">
                                <div class="item-list-submenu" style ="width: 30%">
                                    <h3 style = "color: #FF0000">SALE All 50% ++ | Giảm thêm 10% HĐ từ 2sp</h3>
                                    <ul>
                                        <li>Nữ</li>
                                        <li>Trẻ em</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu" style ="width: 30%">
                                    <h3 style = "color: #FF0000">Big sale hàng hiệu T3</h3>
                                    <ul>
                                        <li>Áo sơ mi</li>
                                        <li>Áo thun</li>
                                        <li>Đầm</li>
                                        <li>Chân váy</li>
                                        <li>Quần</li>
                                        <li>Áo khoác/Vest</li>
                                    </ul>
                                </div>
                                <div class="item-list-submenu" style ="width: 20%">
                                    <h3 style = "color: #FF0000">Clearance sale Upto 75% | ONLY ONLINE</h3>
                                    <ul>
                                        <li>Nữ</li>
                                        <li>Nam</li>
                                        <li>Trẻ em</li>
                                    </ul>
                                </div>                                
                           </div>
                        </ul>
                    </li>
                    <li>
                        <a href="">Bộ sưu tập</a>
                        <ul class="sub-menu" style = "width: 69vw">
                            <div class="cat-sub-menu">
                                <h3>Nữ</h3>
                                <div><a href="">URBAN CHIC</a></div>
                                <div><a href="">MOMENT OF BLISS</a></div>
                                <div><a href="">BLOSSOMS DELIGHT</a></div>
                                <div><a href="">DIỄM THƯ</a></div>
                                <div><a href="">THE WHISPER OF CLASSY</a></div>
                                <div><a href="">EXPRESS</a></div>
                            </div>
                        </ul>
                    </li>
                    <li>
                        <a href="">Về chúng tôi</a>
                        <ul class="sub-menu" style = "width: 20vw">
                            <div class="list-submenu">
                                <div class="item-list-submenu">
                                    <ul>
                                        <li>Về Kslay</li>
                                        <li>Fashion Show</li>
                                        <li>Hoạt động cộng đồng</li>
                                    </ul>
                                </div>                    
                           </div>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div class="site-brand">
                <a href="/">
                    <img src="/img/logo_main.png" alt="">
                </a>
            </div>
            <div class="right-header">
                <form class="search-form" method ="get" enctype="application/x-www-form-urlencoded" name = "search">
                    <button class="submit"><i class="bi bi-search"></i></button>
                    <input type="text" name = "q" placeholder ="TÌM KIẾM SẢN PHẨM" autocomplete = "off" minlength = "1">
                    <div class="quick-search">
                        <div class="item-searchs">
                            <h4>Tìm kiếm nhiều nhất</h4>
                            <div class="item-side-size">
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">Đầm</a>
                                </label>
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">Trễ vai</a>
                                </label>
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">Áo khoác</a>
                                </label>
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">Quần</a>
                                </label>
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">Áo sơ mi</a>
                                </label>
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">Vest</a>
                                </label>
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">croptop</a>
                                </label>
                                <label class = "item-sub-list">
                                    <a href="" class = "item-sub-title">Lông cừu</a>
                                </label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="header-actions">
                <div class="item" style ="position: relative">
                    <a href="" class="icon">
                        <i class="bi bi-headphones"></i>
                    </a>
                    <div class="sub-action">
                        <div class="top-action">
                            <h3>Trợ giúp</h3>
                        </div>
                        <ul>
                            <li>
                                <a href=""><i class="bi bi-telephone-plus-fill"></i>Hotline</a>
                            </li>
                            <li>
                                <a href=""><i class="bi bi-chat-dots-fill"></i>Live Chat</a>
                            </li>
                            <li>
                                <a href=""><i class="bi bi-arrow-repeat"></i>Message</a>
                            </li>
                            <li>
                                <a href=""><i class="bi bi-envelope"></i>Email</a>
                            </li>
                            <li>
                                <a href=""><i class="bi bi-archive"></i>Tra cứu đơn hàng</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="item">
                    <a href="" class="icon">
                    <i class="bi bi-person"></i>
                    </a>
                </div>
                <div class="item item-cart">
                    <a href="" class="icon">
                        <i class="bi bi-bag"></i>
                        <span id="cart-count">0</span>
                    </a>
                    <div class="sub-action sub-action-cart">
                        <div class="top-action">
                            <h3>Giỏ hàng</h3>
                            <i class="fa-solid fa-xmark"></i>
                        </div>
                        <div class="main-action" id="cart-items">
                            <!-- Sản phẩm trong giỏ hàng sẽ được chèn động ở đây -->
                        </div>
                        <div class="bottom-action">
                            <div class="total-price">
                                Tổng cộng: <strong id="total-price">0đ</strong>
                            </div>
                            <div class="box-action">
                                <a href="/pages/giohang.html" class="action-view-cart">Xem giỏ hàng</a>
                                <a href="/pages/login.html" class="action-login">Đăng nhập</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main class="site-main" id="main">
        <div id="product" class="row">
            <div class="container">
                <section class="section-list-products">
                    <div class="box-products d-flex">
                        <div class="sidebar-prod">
                            <div class="filter-by-side">
                                <ul class="list-side">
                                    <li class = "item-side item-side-size">
                                        <p class="item-side-title-firts">
                                            Danh mục sản phẩm
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="main-prod">
                            <div class="top-main-prod">
                                <h1 class="sub-title-main">Best Seller</h1>
                                <div class="filter-prod">
                                    <div class="item-filter">
                                        <span>Sắp xếp theo <i class="fa-solid fa-chevron-down"></i></span>
                                        <div class="list-number-row">
                                            <div class="item-number-row"><a href="javascript:void(0)" class="sel-order-option" data-value = "">Mặc định</a></div>
                                            <div class="item-number-row"><a href="javascript:void(0)" class="sel-order-option" data-value = "price_desc">Giá: cao đến thấp</a></div>
                                            <div class="item-number-row"><a href="javascript:void(0)" class="sel-order-option" data-value = "price_asc">Giá: thấp đến cao</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="sub-main-prod">
                                <div class="list-products list-products-cat d-flex" id="product-list">
                                    
                                </div>
                                <ul class="list-inline-pagination" id="pagination">
                                    <li><a href="#" id="prev-page"><<</a></li>
                                    <!-- Các liên kết trang sẽ được tạo động ở đây -->
                                    <li><a href="#" id="next-page">>></a></li>
                                    <li class="last-page"><a href="#" id="last-page">Trang cuối</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
    <div class="site-bottom">
        <div class="container">
            <div class="main-footer d-flex">
                <div class="left-footer">
                    <div class="top-left">
                        <div class="logo-footer">
                            <a href=""><img src="../img/logo.png" alt=""></a>
                        </div>
                        <a href="" target="_blank">
                            <img src="../img/dmca.png" alt="">
                        </a>
                        <div class="logo-congthuong">
                            <a href="" target="_blank">
                                <img src="../img/congthuong.png" alt="">
                            </a>
                        </div>
                    </div>
                    <div class="content-left content-ft">
                        <div class="info-left-ft">
                            <p>Công ty Cổ phần Dư Kim với số đăng ký kinh doanh: 0105777650</p>
                            <p><strong>Địa chỉ đăng ký: </strong>Tổ dân phố Tháp,P.Đại Mỗ,Q.Nam Từ Liêm,TP.Hà Nội,Việt Nam</p>
                            <p><strong>Số điện thoại: </strong>0243 205 2222</p>
                            <p><strong>Email: </strong>nguyenanht2003@gmai.com</p>
                        </div>
                    </div>
                    <ul class="list-social">
                        <li>
                            <a href="" target="_blank">
                                <img src="../img/ic_fb.svg" alt="">
                            </a>
                        </li>
                        <li>
                            <a href="" target="_blank">
                                <img src="../img/ic_gg.svg" alt="">
                            </a>
                        </li>
                        <li>
                            <a href="" target="_blank">
                                <img src="../img/ic_instagram.svg" alt="" style="height: 30px;">
                            </a>
                        </li>
                        <li>
                            <a href="" target="_blank">
                                <img src="../img/ic_pinterest.svg" alt="" style="height: 27px;">
                            </a>
                        </li>
                        <li>
                            <a href="" target="_blank">
                                <img src="../img/ic_ytb.svg" alt="">
                            </a>
                        </li>
                    </ul>
                    <div class="hotline"><a href="">Hotline: 0246 662 3434</a></div>
                </div>
                <div class="center-footer d-flex">
                    <div class="left-center-ft item-center-ft">
                        <p class="title-footer">Giới thiệu</p>
                        <ul>
                            <li><a href="">Về IVY Moda</a></li>
                            <li><a href="">Tuyển dụng</a></li>
                            <li><a href="">Hệ thống cửa hàng</a></li>
                        </ul>
                    </div>
                    <div class="main-center-ft item-center-ft">
                        <p class="title-footer">Dịch vụ khách hàng</p>
                        <ul>
                            <li><a href="">Chính sách điều khoản</a></li>
                            <li><a href="">Hướng dẫn mua hàng</a></li>
                            <li><a href="">Chính sách thanh toán</a></li>
                            <li><a href="">Chính sách đổi trả</a></li>
                            <li><a href="">Chính sách bảo hành</a></li>
                            <li><a href="">Chính sách giao nhận vận chuyển</a></li>
                            <li><a href="">Chính sách thẻ thành viên</a></li>
                            <li><a href="">Hệ thống cửa hàng</a></li>
                            <li><a href="">Q&A</a></li>
                        </ul>
                    </div>
                    <div class="right-center-ft item-center-ft">
                        <p class="title-footer">Liên hệ</p>
                        <ul>
                            <li><a href="">Hotline</a></li>
                            <li><a href="">Email</a></li>
                            <li><a href="">Live Chat</a></li>
                            <li><a href="">Messenger</a></li>
                            <li><a href="">Liên hệ</a></li>
                        </ul>
                    </div>
                </div>

                <div class="right-footer">
                    <div class="register-form">
                        <p class="title-footer">Nhận thông tin các chương trình của IVY moda</p>
                        <form id="frm-subcribe">
                            <input type="text" name="email" placeholder="Nhập địa chỉ email" required id="email-subcribe">
                            <div class="btn-submit">
                                <input type="submit" value="Đăng ký" id="btn-submit" class="form-submit">
                            </div>
                        </form>
                    </div>
                    <div class="info-right-ft">
                        <p class="title-footer">Download App</p>
                        <ul>
                            <li>
                                <a href="" class="link-white" target="_blank"><img src="../img/appstore.png" alt=""></a>
                            </li>
                            <li>
                                <a href="" class="link-white" target="_blank"><img src="../img/googleplay.png" alt=""></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer id="footer" class="site-footer">
        <div class="container">
            <div class="copy-right">No copy right</div>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/script.js"></script>
    <script src="/js/data.js"></script>
    <script>
        // Load sản phẩm vào trang;
        document.addEventListener("DOMContentLoaded", function() {
        const products = san_pham; // 'san_pham' là biến từ file data.js
        const productsPerPage = 12;
        let currentPage = 1;
        const totalPages = Math.ceil(products.length / productsPerPage);

        const productList = document.getElementById('product-list');
        const pagination = document.getElementById('pagination');
        const prevPageElement = document.getElementById('prev-page').parentElement;
        const nextPageElement = document.getElementById('next-page').parentElement;
        const lastPageElement = document.getElementById('last-page').parentElement;

        const cart = [];
        const cartCountElement = document.getElementById('cart-count');
        const cartItemsElement = document.getElementById('cart-items');
        const totalPriceElement = document.getElementById('total-price');

        const categories = new Set();

        // Lặp qua danh sách sản phẩm để lấy các loại sản phẩm duy nhất
        products.forEach(product => {
            categories.add(product.loai_san_pham);
        });

        // Xóa các mục sản phẩm hiện có trong HTML để chuẩn bị thêm lại danh sách duy nhất
        const listSide = document.querySelector('.list-side');
        listSide.innerHTML = '';

        // Thêm lại các mục sản phẩm duy nhất từ Set
        categories.forEach(category => {
            const li = document.createElement('li');
            li.classList.add('item-side', 'item-side-size');
            const a = document.createElement('a');
            a.classList.add('item-side-title');
            a.textContent = category;
            a.setAttribute('data-category', category); // Đặt thuộc tính data-category để lọc
            li.appendChild(a);
            listSide.appendChild(li);

            // Xử lý sự kiện click vào từng danh mục
            a.addEventListener('click', function() {
                const selectedCategory = this.getAttribute('data-category');
                filterProducts(selectedCategory);
            });
        });

        function renderProducts(page, category = '') {
        productList.innerHTML = '';
        let filteredProducts = products;

        // Lọc sản phẩm theo danh mục nếu có
        if (category) {
            filteredProducts = products.filter(product => product.loai_san_pham === category);
        }

        const start = (page - 1) * productsPerPage;
        const end = page * productsPerPage;
        const paginatedProducts = filteredProducts.slice(start, end);

        paginatedProducts.forEach(product => {
            const productHTML = `
                <div class="item-cat-product">
                    <div class="product">
                        <div class="info-ticket seller">Best Seller</div>
                        <div class="badget badget_02">
                            -60
                            <span>%</span>
                        </div>
                        <div class="thumb-product">
                            <a href="/pages/chitietsp.html?=${product.id}"><img src="${product.anh_1}" alt=""></a>
                            <a href="/pages/chitietsp.html?=${product.id}"><img src="${product.anh_2}" alt="" class="hover-img"></a>
                        </div>
                        <div class="info-product">
                            <div class="list-color">
                                <div class="favourite">
                                    <i class="bi bi-heart"></i>
                                </div>
                            </div>
                            <h3 class="title-product">
                                <a href="">${product.ten_sp}</a>
                            </h3>
                            <div class="price-product">
                                <ins><span>${product.gia.toLocaleString('vi-VN')}đ</span></ins>
                                <del>
                                    <span>${(product.gia * 1.2).toLocaleString('vi-VN')}đ</span>
                                </del>
                            </div>
                        </div>
                        <div class="add-to-cart">
                            <a href="#" data-id="${product.id}">
                                <i class="bi bi-cart"></i>
                            </a>
                        </div>
                    </div>
                </div>
            `;
            productList.insertAdjacentHTML('beforeend', productHTML);
        });

            // Add event listener to all "add-to-cart" buttons
            document.querySelectorAll('.add-to-cart a').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const productId = this.getAttribute('data-id');
                    addToCart(productId);
                });
            });
    }

    function renderPagination() {
        // Xóa các liên kết trang hiện tại trừ prev, next và last
        const pageLinks = Array.from(pagination.children).filter(li => li !== prevPageElement && li !== nextPageElement && li !== lastPageElement);
        pageLinks.forEach(link => link.remove());

        for (let i = 1; i <= totalPages; i++) {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = `#`;
            a.dataset.page = i;
            a.textContent = i;
            if (i === currentPage) {
                li.classList.add('product_active_ts');
            }
            li.appendChild(a);
            // Chèn vào trước phần tử 'next-page'
            pagination.insertBefore(li, nextPageElement);
        }

        updatePaginationLinks();
    }

    function updatePaginationLinks() {
        const prevPage = document.getElementById('prev-page');
        const nextPage = document.getElementById('next-page');
        const lastPage = document.getElementById('last-page');

        prevPage.parentElement.classList.toggle('disabled', currentPage === 1);
        nextPage.parentElement.classList.toggle('disabled', currentPage === totalPages);

        prevPage.onclick = function(e) {
            e.preventDefault();
            if (currentPage > 1) {
                currentPage--;
                renderProducts(currentPage);
                renderPagination();
            }
        };

        nextPage.onclick = function(e) {
            e.preventDefault();
            if (currentPage < totalPages) {
                currentPage++;
                renderProducts(currentPage);
                renderPagination();
            }
        };

        lastPage.onclick = function(e) {
            e.preventDefault();
            currentPage = totalPages;
            renderProducts(currentPage);
            renderPagination();
        };

        pagination.querySelectorAll('[data-page]').forEach(link => {
            link.onclick = function(e) {
                e.preventDefault();
                currentPage = parseInt(this.dataset.page);
                renderProducts(currentPage);
                renderPagination();
            };
        });
    }

    function addToCart(productId) {
        const product = products.find(p => p.id == productId);
        const cartItem = cart.find(item => item.id == productId);

        if (cartItem) {
            cartItem.quantity++;
        } else {
            cart.push({ ...product, quantity: 1 });
        }

        // Lưu giỏ hàng vào localStorage
        localStorage.setItem('cart', JSON.stringify(cart));

        updateCartUI();

        // Hiển thị thông báo
        const alertMessage = document.getElementById('alert-message');
        alertMessage.classList.add('show');
        alertMessage.textContent = `${product.ten_sp} đã được thêm vào giỏ hàng!`;

        // Xóa thông báo sau một khoảng thời gian
        setTimeout(() => {
            alertMessage.textContent = '';
            alertMessage.classList.remove('show');
        }, 3000); // Xóa thông báo sau 3 giây (3000 milliseconds)
    }

    function updateCartUI() {
    cartItemsElement.innerHTML = '';
    let total = 0;
    cart.forEach(item => {
        const itemTotal = item.gia * item.quantity;
        total += itemTotal;
        const cartItemHTML = `
            <div class="item-product-cart d-flex" style="padding-top: 10px;">
                <div class="thumb-product-cart">
                    <img src="${item.anh_1}" alt="">
                </div>
                <div class="info-product-cart">
                    <h3><a href="">${item.ten_sp}</a></h3>
                    <div class="info-price-mini d-flex">
                        <div class="info-price-quantity d-flex">
                            <input type="number" min="1" value="${item.quantity}" data-id="${item.id}">
                            <button class="remove-item" data-id="${item.id}">&times;</button> <!-- Nút times để xóa sản phẩm -->
                        </div>
                        <div class="price-cart-mini">
                            <ins><span>${itemTotal.toLocaleString('vi-VN')}đ</span></ins>
                        </div>
                    </div>
                </div>
            </div>
        `;
        cartItemsElement.insertAdjacentHTML('beforeend', cartItemHTML);
    });

    const removeButtons = document.querySelectorAll('.remove-item');
    removeButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            const productId = this.getAttribute('data-id');
            removeFromCart(productId);
        });
    });

    totalPriceElement.textContent = `${total.toLocaleString('vi-VN')}đ`;
    cartCountElement.textContent = cart.length;
}

    function removeFromCart(productId) {
        const index = cart.findIndex(item => item.id == productId);
        if (index !== -1) {
            cart.splice(index, 1);
            // Cập nhật lại localStorage sau khi xóa khỏi cart
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
        }
    }

    // Sự kiện thay đổi số lượng sản phẩm trong giỏ hàng
    cartItemsElement.addEventListener('change', function(e) {
        if (e.target && e.target.type === 'number') {
            const productId = e.target.getAttribute('data-id');
            const newQuantity = parseInt(e.target.value);
            const cartItem = cart.find(item => item.id == productId);

            if (cartItem && newQuantity > 0) {
                cartItem.quantity = newQuantity;
                updateCartUI();
            }
        }
    });
    function filterProducts(category) {
        currentPage = 1; // Reset trang về 1 khi áp dụng bộ lọc
        renderProducts(currentPage, category);
        renderPagination();
    }
    const sortOptions = document.querySelectorAll('.sel-order-option');
sortOptions.forEach(option => {
    option.addEventListener('click', function() {
        const value = this.getAttribute('data-value');
        sortProducts(value);
    });
});

// Hàm sắp xếp sản phẩm
function sortProducts(option) {
    switch (option) {
        case 'price_desc':
            products.sort((a, b) => b.gia - a.gia); // Sắp xếp giảm dần theo giá
            break;
        case 'price_asc':
            products.sort((a, b) => a.gia - b.gia); // Sắp xếp tăng dần theo giá
            break;
        default:
            window.location.reload();
            break;
    }

    // Sau khi sắp xếp xong, hiển thị lại sản phẩm trên trang
    renderProducts(currentPage);
    renderPagination();
}

    renderProducts(currentPage);
    renderPagination();
});



var itemFilter = document.querySelector('.item-filter');
var list_filter =document.querySelector('.list-number-row');
var iconDown = document.querySelector('.item-filter .fa-solid');
itemFilter.addEventListener('click',function(){
list_filter.classList.toggle('open');
iconDown.classList.toggle('fa-chevron-down');
iconDown.classList.toggle('fa-chevron-up');
});




        

        



        
    </script>
</body>
</html>